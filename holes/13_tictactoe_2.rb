$<.map{|l|a,b,c,d,e,f,g,h,j,m=l.chars;puts a!="."&&a==e&&a==l[8]?a:c!="."&&c==e&&c==g ?c:a!="."&&a==b&&a==c ?a:d!="."&&d==e&&d==f ?d:g!="."&&g==h&&g==l[8]?g:l.scan(/(x|o).{2}\1.{2}\1/).flatten[0]||"?"}